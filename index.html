// Ícones personalizados por categoria
const icons = {
  capoeira: L.icon({
    iconUrl: 'https://cdn-icons-png.flaticon.com/512/69/69524.png', // bonequinho
    iconSize: [32, 32],
    iconAnchor: [16, 32],
    popupAnchor: [0, -28]
  }),
  espaco: L.icon({
    iconUrl: 'https://cdn-icons-png.flaticon.com/512/3179/3179068.png', // casinha cultural
    iconSize: [32, 32],
    iconAnchor: [16, 32],
    popupAnchor: [0, -28]
  })
};

// Dados dos artistas
const artistas = [
  {
    nome: "Grupo Cordão de Ouro Montes Claros (Espaço cultural)",
    lat: -16.71859,
    lng: -43.87262,
    categoria: "espaco",  // ✅ categoria correta
    telefone: "+5538988366925",
    endereco: "Rua São Paulo, 833, Todos os Santos - Montes Claros, MG",
    imagem: "https://i.imgur.com/grvPSh2.png",
    instagram: "https://www.instagram.com/cordaodeouromoc/"
  },
  {
    nome: "Mestre Ton (Capoeira)",
    lat: -16.71839,
    lng: -43.87261,
    categoria: "capoeira", // ✅ categoria correta
    telefone: "+5538988366925",
    endereco: "Rua São Paulo, 833, Todos os Santos - Montes Claros, MG",
    imagem: "https://i.imgur.com/Rs78Tbn.jpeg",
    instagram: "https://www.instagram.com/ton_cdo/"
  }
];

// Adiciona marcadores e popups
artistas.forEach(artista => {
  // ✅ Usa a categoria para escolher o ícone
  const marcador = L.marker([artista.lat, artista.lng], { icon: icons[artista.categoria] }).addTo(map);

  let popupContent = `<b>${artista.nome}</b><br>📍 ${artista.endereco}`;

  if (artista.imagem) {
    popupContent += `<br><img src="${artista.imagem}" alt="Foto do artista" class="popup-img">`;
  }

  // WhatsApp
  if (artista.telefone) {
    popupContent += `<br><a href="https://wa.me/${artista.telefone}" target="_blank" class="popup-link popup-whatsapp">
                       <img src="https://cdn-icons-png.flaticon.com/512/733/733585.png" class="popup-icon" alt="WhatsApp"> WhatsApp
                     </a>`;
  }

  // Instagram
  if (artista.instagram) {
    popupContent += `<br><a href="${artista.instagram}" target="_blank" class="popup-link popup-instagram">
                       <img src="https://cdn-icons-png.flaticon.com/512/2111/2111463.png" class="popup-icon" alt="Instagram"> Instagram
                     </a>`;
  }

  marcador.bindPopup(popupContent);
});
